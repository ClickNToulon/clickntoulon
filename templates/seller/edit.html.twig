{% extends 'base.html.twig' %}

{% block title 'Modifier les informations de ma boutique - TouSolidaires' %}

{% block body %}
    {% include 'navbar.html.twig' with {'active': 'my-shop'} %}
    {% include 'seller/_header.html.twig' %}
    {% include 'seller/_tabs.html.twig' with {'active': 'edit'} %}
    <div class="toast-container position-absolute p-3">
        {% for message in app.flashes('success') %}
            <div class="toast toast-success d-flex align-items-center bg-dark border-0" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-body d-flex align-items-center">
                    <div class="toast-icon">
                        <i class="bi-check-circle" aria-hidden="true"></i>
                    </div>
                    <div class="toast-text mx-2">
                        <p class="d-flex align-items-center text-center mb-0" style="font-size: 15px">{{ message }}</p>
                    </div>
                    <div class="alert__progress"></div>
                </div>
            </div>
            <script>
                const toastsWarning = [].slice.call(document.querySelectorAll('.toast-success'));
                const toastsWarningItem = toastsWarning.map(function (toast) {
                    // Creates an array of toasts (it only initializes them)
                    return new bootstrap.Toast(toast, {"delay": 5010}) // No need for options; use the default options
                });
                toastsWarningItem.forEach(toast => toast.show()); // This show them
            </script>
        {% endfor %}
    </div>
    {{ form_start(form_update, {attr: {class: 'user-modify'}}) }}
    <h3 class="user-modify-title"><i class="bi-shop-window"></i> Informations de ma boutique</h3>
    <div class="forms form-modify">
        <i class="left">Tous les champs doivent être remplis, sauf pour l'adresse mail qui est facultatif.</i>
        <div class="row first">
            <div class="col-12 form-row">
                {{ form_row(form_update.name) }}
                {{ form_row(form_update.tag) }}
            </div>
        </div>
        <div class="row">
            <div class="col-12 form-row">
                {{ form_row(form_update.email) }}
                {{ form_row(form_update.phone) }}
            </div>
        </div>
        <div class="row">
            <div class="col-12 form-row form-address">
                {{ form_row(form_update.description) }}
            </div>
        </div>
        <div class="row">
            <div class="col-12 form-row form-address">
                {{ form_row(form_update.address) }}
            </div>
        </div>
        <div class="row">
            <div class="col-12 form-row">
                {{ form_row(form_update.postal_code) }}
                {{ form_row(form_update.city) }}
            </div>
        </div>
    </div>
    <br>
    <div class="forms form-modify">
        <i class="left">Au moins un des sélecteurs ci-dessous doit être sélectionné</i>
        <div class="row">
            <div class="col-12 form-row">
                <div class="checkboxs">
                    {% for payment in payments %}
                        <div>
                            <input type="checkbox" class="form-check-input" name="payment[]" value="{{ payment.id }}" id="payment_{{ payment.id }}" {% if payment in shop.payments %}checked{% endif %}>
                            <label for="payment_{{ payment.id }}">{{ payment.name }}</label>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    <div class="button-submit">
        <button type="submit" class="btn btn-form" name="add_shop">Modifier ma boutique</button>
    </div>
    {{ form_end(form_update) }}

    {{ form_start(form_delete, {attr: {class: 'user-modify last'}}) }}
        <h3 class="danger-zone"><i class="bi-trash"></i> Danger Zone</h3>
        <p class="danger-zone-txt">Vous n'êtes pas satisfait du contenu proposé sur le site ?<br>
            Ou vous souhaitez supprimer toutes les informations associées à votre boutique ?</p>
        <i class="danger-zone-txt">Cette fonctionnalit&eacute; va supprimer toutes les donn&eacute;es relatives à votre boutique, ainsi que toutes les commandes passées sur le site qui ne sont encore livrées (donc même celles en attente et en préparation).</i>
        <div class="button-submit">
            <button type="submit" class="btn btn-form btn-danger" name="delete"><i class="bi-trash"></i> Supprimer ma boutique</button>
        </div>
    {{ form_end(form_delete) }}
    {% include 'footer.html.twig' %}
{% endblock %}
