{% for product in products %}
    <div class="group relative">
        {% if product.unitPriceDiscount != null and product.unitPriceDiscount != 0 %}
            <span class="bg-red-600 rounded-xl text-white font-bold px-3 py-2 absolute -right-4 z-10 -top-4 flex items-center justify-center uppercase">
                Promo
            </span>
        {% endif %}
        <div class="w-full min-h-80 bg-gray-200 aspect-w-1 aspect-h-1 rounded-md overflow-hidden group-hover:opacity-75 lg:h-80 lg:aspect-none">
            <img src="{{ asset('uploads/products/' ~ product.images[0]) }}" alt="Product Image" class="w-full h-full object-center object-cover lg:w-full lg:h-full">
        </div>
        <div class="mt-4 flex justify-between items-baseline">
            <h3 class="text-2xl text-black dark:text-white font-bold tracking-wide">
                <a href="{{ path('product_show', {id: product.id}) }}">
                    <span aria-hidden="true" class="absolute inset-0"></span>
                    {{ product.name }}
                </a>
            </h3>
            {% if product.unitPriceDiscount is not null %}
                <div class="inline-flex items-baseline justify-between space-x-2">
                    {% set dealPrice = product.unitPrice * (1 - (product.unitPriceDiscount/100)) | round(2) %}
                    <p class="text-lg font-bold text-gray-900 dark:text-red-500">{{ dealPrice | format_currency('EUR') }}</p>
                    <p class="text-lg font-bold bg-accent-red text-red-700 rounded-full px-2.5 py-0.25">-{{ product.unitPriceDiscount }}%</p>
                </div>
            {% else %}
                <p class="text-lg font-bold text-gray-900 dark:text-gray-200">{{ product.unitPrice | format_currency('EUR') }}</p>
            {% endif %}
        </div>
        <div class="mt-2">
            <p class="text-lg text-justify text-gray-900 dark:text-gray-200 font-medium">{{ product.description | u.truncate(90, '...', false) }}</p>
        </div>
    </div>
{% endfor %}