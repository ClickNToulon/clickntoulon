{% for product in products %}
    <div class="group relative">
        {% if product.unitPriceDiscount != null and product.unitPriceDiscount != 0 %}
            <span class="bg-red-600 rounded-xl text-white font-bold px-3 py-2 absolute -right-4 z-10 -top-4 flex items-center justify-center uppercase">
                Promo
            </span>
        {% endif %}
        <div class="w-full min-h-80 bg-gray-200 aspect-w-1 aspect-h-1 rounded-md overflow-hidden group-hover:opacity-75 lg:h-80 lg:aspect-none">
            <img src="{{ asset('uploads/products/' ~ product.images[0]) }}" alt="Product Image" class="w-full h-full object-center object-cover lg:w-full lg:h-full">
        </div>
        <div class="mt-4 flex justify-between items-baseline">
            <h3 class="text-2xl text-black dark:text-white font-bold tracking-wide">
                <a href="{{ path('product_show', {id: product.id}) }}">
                    <span aria-hidden="true" class="absolute inset-0"></span>
                    {{ product.name }}
                </a>
            </h3>
            {% if product.unitPriceDiscount is not null %}
                <div class="inline-flex items-baseline justify-between space-x-2">
                    {% set dealPrice = product.unitPrice * (1 - (product.unitPriceDiscount/100)) | round(2) %}
                    <p class="text-lg font-bold text-gray-900 dark:text-red-500">{{ dealPrice | format_currency('EUR') }}</p>
                    <p class="text-lg font-bold bg-accent-red text-red-700 rounded-full px-2.5 py-0.25">-{{ product.unitPriceDiscount }}%</p>
                </div>
            {% else %}
                <p class="text-lg font-bold text-gray-900 dark:text-gray-200">{{ product.unitPrice | format_currency('EUR') }}</p>
            {% endif %}
        </div>
        <div class="mt-2">
            <p class="text-lg text-justify text-gray-900 dark:text-gray-200 font-medium">{{ product.description | u.truncate(90, '...', false) }}</p>
        </div>
    </div>
    {# <div class="w-full relative">
        {% if product.unitPriceDiscount != null and product.unitPriceDiscount != 0 %}
            <span class="bg-red-600 rounded-xl text-white font-bold px-3 py-2 absolute -right-4 z-10 -top-4 flex items-center justify-center uppercase">
                Promo
            </span>
        {% endif %}
        <div class="h-full bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-xl dark:shadow-none">
            {% if product.images is iterable and product.images[0] != null and product.images != null %}
                <img class="h-72 w-full object-cover object-center" src="{{ asset('uploads/products/' ~ product.images[0]) }}" alt="blog">
            {% else %}
                <img src="{{ asset('images/clickntoulon.svg') }}" alt="" class="lg:h-48 md:h-36 w-full object-cover object-center">
            {% endif %}
            <div class="p-6">
                <div class="flex justify-center items-center w-full mb-3">
                    <h1 class="title-font text-2xl font-semibold text-black dark:text-white">{{ product.name }}</h1>
                </div>
                <p class="font-semibold text-black dark:text-gray-200 mb-3 text-lg">{{ product.description | u.truncate(120, '...', true) }}</p>
                <div class="flex justify-between items-center w-full">
                    {% if product.unitPriceDiscount != null %}
                        <div class="inline-flex flex-row space-x-4 w-full py-2 justify-center">
                            <h1 class="font-extrabold text-red-600 text-xl py-0.5">
                                {% set dealPrice = product.unitPrice * (1 - (product.unitPriceDiscount/100)) %}
                                {{ dealPrice | format_currency('EUR') }}
                            </h1>
                            <h1 class="font-bold text-white text-xl py-0.5 px-3 rounded-lg bg-red-600">
                                -{{ product.unitPriceDiscount }}%
                            </h1>
                        </div>
                    {% else %}
                        <h1 class="font-semibold text-black dark:text-gray-200 text-base text-center w-full mr-auto">
                            {{ product.unitPrice | format_currency('EUR') }}
                        </h1>
                    {% endif %}
                    <div class="flex w-full items-center justify-center">
                        <a href="{{ path('product_show', {id: product.id}) }}" class="bg-yellow-600 inline-flex items-center text-white px-3 py-2 w-auto rounded-lg hover:bg-yellow-700 font-bold focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-yellow-600">
                            Voir le produit
                            <svg class="w-6 h-6 ml-2" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M5 12h14"></path>
                                <path d="M12 5l7 7-7 7"></path>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div> #}
{% endfor %}