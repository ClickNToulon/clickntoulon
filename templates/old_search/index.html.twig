{% extends 'base.html.twig' %}

{% block title 'Recherche - ClickNToulon' %}

{% block body %}
    {% include 'navbar.html.twig' with {'active': 'search'} %}
    <section class="text-gray-600 body-font" id="discover">
        <div class="sm:container px-8 sm:px-5 py-24 mx-auto">
            <div class="text-center mb-20">
                <h1 class="sm:text-5xl text-3xl font-extrabold title-font text-black mb-4 uppercase">Rechercher</h1>
                <div class="flex mt-6 justify-center">
                    <div class="w-1/4 h-1 rounded-full bg-yellow-500 inline-flex"></div>
                </div>
            </div>
            <div class="flex items-center justify-center">
                {{ form_start(search, {attr: {class: 'space-y-3 w-1/3 text-center'}}) }}
                <div class="rounded-md -space-y-px">
                    {{ form_row(search.q) }}
                </div>
                <div>
                    <button type="submit" class="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-yellow-500 hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-yellow-500">
                        Rechercher
                    </button>
                </div>
                {{ form_end(search) }}
            </div>
        </div>
    </section>

    {% if word_searched | length > 0 %}
        {% if search_count != 0 %}
        <section class="text-gray-600 body-font" id="discover">
            <div class="sm:container px-8 sm:px-5 pb-24 mx-auto">
                <div class="text-center mb-20">
                    <h1 class="sm:text-5xl text-3xl font-extrabold title-font text-black mb-4 uppercase">{{ search_count }} {% if search_count > 1 %} Résultats {% else %} Résultat {% endif %}</h1>
                    <p class="title-font tablet:text-3xl sm:text-2xl text-xl mb-8 font-medium text-black">{{ search_shop_count }} {% if search_shop_count > 1 %} Résultats correspondent{% else %} Résultat correspond{% endif %} à des boutiques</p>
                    <div class="flex mt-6 justify-center">
                        <div class="w-1/4 h-1 rounded-full bg-yellow-500 inline-flex"></div>
                    </div>
                </div>
                <div class="flex flex-wrap -m-4">
                    {% include 'shop/shop_skeleton.html.twig' with {'shops': search_shop_results} %}
                </div>
            </div>
        </section>
        <section class="text-gray-600 body-font" id="discover">
            <div class="sm:container px-8 sm:px-5 pb-24 mx-auto">
                <div class="text-center mb-20">
                    <p class="title-font tablet:text-3xl sm:text-2xl text-xl mb-8 font-medium text-black">{{ search_product_count }} {% if search_product_count > 1 %} Résultats correspondent{% else %} Résultat correspond{% endif %} à des produits</p>
                    <div class="flex mt-6 justify-center">
                        <div class="w-1/4 h-1 rounded-full bg-yellow-500 inline-flex"></div>
                    </div>
                </div>
                <div class="mt-6 grid grid-cols-1 gap-y-10 gap-x-6 sm:grid-cols-2 lg:grid-cols-4 xl:gap-x-8">
                    {% include 'product/product_skeleton.html.twig' with {'products': search_product_results} %}
                </div>
            </div>
        </section>
        {% else %}
            <div class="flex items-center flex-col">
                <h4 class="text-black font-medium text-lg">Il n’y a aucun résultat pour {{ word_searched }}</h4>
                <h6 class="text-black font-medium text-lg">Vérifiez l’orthographe des mots saisis ou complétez-les par un nouveau mot clé</h6>
            </div>
        {% endif %}
    {% endif %}
{% endblock %}