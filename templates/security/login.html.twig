{% extends 'base.html.twig' %}

{% block title  'Connexion - ClickNToulon'%}

{% block body %}
    <div class="sm:container px-5 mx-auto flex items-center justify-center py-6">
        <div class="w-full max-w-xl h-auto">
            <div class="h-full w-full sm:px-12">
                <h1 class="text-4xl font-bold text-center mb-2 text-refresh-purple dark:text-white capitalize">Se connecter</h1>
                <div class="w-full pb-4 text-center text-black dark:text-white font-bold">
                    ou
                    <a href="{{ path('app_signup') }}" class="text-black dark:text-white underline decoration-[3px] underline-offset-4 decoration-sky-600">
                        créer un nouveau compte
                    </a>
                </div>
                {% for message in app.flashes('warning') %}
                    <div class="mb-4 flex rounded-lg p-3 bg-slate-50 dark:bg-slate-800/70 dark:ring-1 dark:ring-slate-300/10">
                        <svg aria-hidden="true" viewBox="0 0 32 32" fill="none" class="h-8 w-8 flex-none [--icon-foreground:theme(colors.red.900)] [--icon-background:theme(colors.red.500)]">
                            <defs>
                                <radialGradient cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" id="gradient" gradientTransform="rotate(65.924 1.519 20.92) scale(25.7391)">
                                    <stop stop-color="#ef4444" offset=".08"></stop>
                                    <stop stop-color="#dc2626" offset=".837"></stop>
                                </radialGradient>
                            </defs>
                            <g>
                                <path
                                     fill="url(#gradient)"
                                     fill-rule="evenodd"
                                     clip-rule="evenodd"
                                     d="M2 16C2 8.268 8.268 2 16 2s14 6.268 14 14-6.268 14-14 14S2 23.732 2 16Zm11.386-4.85a2.66 2.66 0 1 1 5.228 0l-1.039 5.543a1.602 1.602 0 0 1-3.15 0l-1.04-5.543ZM16 20a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z"
                                />
                            </g>
                        </svg>
                        <div class="ml-4 flex-auto">
                            <p class="m-0 font-display text-xl text-red-500 dark:text-red-600 font-bold dark:font-medium">Oops ! Une erreur est survenue !</p>
                            <div
                                class="prose mt-2.5 text-sky-500 prose-a:underline prose-a:decoration-[2px] prose-a:decoration-sky-600 prose-a:underline-offset-4
                                prose-a:text-slate-900 dark:prose-a:text-white hover:prose-a:text-sky-500 text-slate-900 dark:text-slate-300 dark:prose-code:text-slate-300 max-w-full"
                            >
                                {{ message }}
                            </div>
                        </div>
                    </div>
                {% endfor %}
                {% if error %}
                    <div class="mb-4 flex rounded-lg p-3 bg-slate-50 dark:bg-slate-800/70 dark:ring-1 dark:ring-slate-300/10">
                        <svg aria-hidden="true" viewBox="0 0 32 32" fill="none" class="h-8 w-8 flex-none [--icon-foreground:theme(colors.red.900)] [--icon-background:theme(colors.red.500)]">
                            <defs>
                                <radialGradient cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" id="gradient" gradientTransform="rotate(65.924 1.519 20.92) scale(25.7391)">
                                    <stop stop-color="#ef4444" offset=".08"></stop>
                                    <stop stop-color="#dc2626" offset=".837"></stop>
                                </radialGradient>
                            </defs>
                            <g>
                                <path
                                        fill="url(#gradient)"
                                        fill-rule="evenodd"
                                        clip-rule="evenodd"
                                        d="M2 16C2 8.268 8.268 2 16 2s14 6.268 14 14-6.268 14-14 14S2 23.732 2 16Zm11.386-4.85a2.66 2.66 0 1 1 5.228 0l-1.039 5.543a1.602 1.602 0 0 1-3.15 0l-1.04-5.543ZM16 20a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z"
                                />
                            </g>
                        </svg>
                        <div class="ml-4 flex-auto">
                            <p class="m-0 font-display text-xl text-red-500 dark:text-red-600 font-bold dark:font-medium">Oops ! Une erreur est survenue !</p>
                            <div
                                    class="prose mt-2.5 text-sky-500 prose-a:underline prose-a:decoration-[2px] prose-a:decoration-sky-600 prose-a:underline-offset-4
                                prose-a:text-slate-900 dark:prose-a:text-white hover:prose-a:text-sky-500 text-slate-900 dark:text-slate-300 dark:prose-code:text-slate-300 max-w-full"
                            >
                                {{ error.messageKey | trans(domain="security", locale="fr") }}
                            </div>
                        </div>
                    </div>
                {% endif %}
                <form method="post" class="w-full space-y-6 mb-8" autocomplete="off">
                    <div class="flex flex-col space-y-6">
                        <div class="relative">
                            <label for="email">Adresse email</label>
                            <input type="email" name="email" id="email" required autocomplete="new-password"/>
                        </div>
                        <div class="relative">
                            <label for="password">Mot de passe</label>
                            <input type="password" name="password" id="password" autocomplete="current-password" required/>
                        </div>
                        <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
                    </div>
                    <div class="flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 justify-between">
                        <div class="flex items-center">
                            <input id="remember-me" name="remember-me" type="checkbox">
                            <label for="remember-me" class="ml-2 block">Se souvenir de moi</label>
                        </div>
                        <a href="" class="font-bold text-black dark:text-white underline decoration-[3px] underline-offset-4 decoration-sky-600">Mot de passe oublié ?</a>
                    </div>
                    <button class="w-full px-3 py-1 rounded-lg bg-sky-600 transition hover:bg-sky-500 relative" type="submit">
                        <span class="font-semibold text-white text-lg">Connexion</span>
                    </button>
                </form>

                <div class="border-t-2 border-sky-500">
                    <span class="block w-max mx-auto -mt-3.5 px-4 text-center text-black dark:text-white font-bold bg-white dark:bg-slate-900">Ou continuer avec</span>
                </div>

                <div class="mt-6 grid gap-2 sm:gap-6 sm:grid-cols-2 w-full">
                    <a href="{{ path('oauth_connect', {service: 'google'}) }}" class="w-full">
                        <button class="py-1 px-3 rounded-lg bg-red-700 hover:bg-red-600 focus:bg-red-600 active:bg-red-500 flex items-center justify-center w-full">
                            <svg class="h-5 w-5 text-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g clip-path="url(#google)">
                                    <path d="M23.766 12.2764C23.766 11.4607 23.6999 10.6406 23.5588 9.83807H12.24V14.4591H18.7217C18.4528 15.9494 17.5885 17.2678 16.323 18.1056V21.1039H20.19C22.4608 19.0139 23.766 15.9274 23.766 12.2764Z" fill="currentColor" />
                                    <path d="M12.24 24.0008C15.4764 24.0008 18.2058 22.9382 20.1944 21.1039L16.3274 18.1055C15.2516 18.8375 13.8626 19.252 12.2444 19.252C9.11376 19.252 6.45934 17.1399 5.50693 14.3003H1.51648V17.3912C3.55359 21.4434 7.70278 24.0008 12.24 24.0008Z" fill="currentColor" />
                                    <path d="M5.50253 14.3003C4.99987 12.8099 4.99987 11.1961 5.50253 9.70575V6.61481H1.51649C-0.18551 10.0056 -0.18551 14.0004 1.51649 17.3912L5.50253 14.3003Z" fill="currentColor" />
                                    <path d="M12.24 4.74966C13.9508 4.7232 15.6043 5.36697 16.8433 6.54867L20.2694 3.12262C18.1 1.0855 15.2207 -0.034466 12.24 0.000808666C7.70277 0.000808666 3.55359 2.55822 1.51648 6.61481L5.50252 9.70575C6.45052 6.86173 9.10935 4.74966 12.24 4.74966Z" fill="currentColor" />
                                </g>
                                <defs>
                                    <clipPath id="google">
                                        <rect class="h-6 w-6" fill="white" width="24" height="24"/>
                                    </clipPath>
                                </defs>
                            </svg>
                            <span class="ml-2 font-medium text-white">Google</span>
                        </button>
                    </a>
                    <a href="{{ path('oauth_connect', {service: 'microsoft'}) }}" class="w-full">
                        <button class="py-1 px-3 w-full rounded-lg bg-gray-800 transition hover:bg-gray-700 active:bg-gray-600 focus:bg-gray-700 flex items-center justify-center text-white">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" class="h-5 w-5">
                                <path fill="none" d="M0 0h23v23H0z"/>
                                <path fill="#f35325" d="M1 1h10v10H1z"/>
                                <path fill="#81bc06" d="M12 1h10v10H12z"/>
                                <path fill="#05a6f0" d="M1 12h10v10H1z"/>
                                <path fill="#ffba08" d="M12 12h10v10H12z"/>
                            </svg>
                            <span class="ml-2 font-medium text-white">Microsoft</span>
                        </button>
                    </a>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
