{% extends 'base.html.twig' %}

{% block title  'Connexion - TouSolidaires'%}

{% block body %}
    {% include 'navbar.html.twig' with {'active': 'login'} %}
    <div class="toast-container position-absolute p-3">
        {% if error %}
        <div class="toast toast-warning d-flex align-items-center bg-dark border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-body d-flex align-items-center">
                <div class="toast-icon">
                    <i class="bi-exclamation-circle" aria-hidden="true"></i>
                </div>
                <div class="toast-text mx-2">
                    <p class="d-flex align-items-center text-center mb-0" style="font-size: 15px;font-weight: bold">{{ error.messageKey|trans(error.messageData, 'security') }}</p>
                </div>
                <div class="alert__progress warning"></div>
            </div>
        </div>
        {% endif %}
        <script>
            var toastsWarning = [].slice.call(document.querySelectorAll('.toast-warning'))
            var toastsWarningItem = toastsWarning.map(function(toast) {
                // Creates an array of toasts (it only initializes them)
                return new bootstrap.Toast(toast, {"delay": 5010}) // No need for options; use the default options
            });
            toastsWarningItem.forEach(toast => toast.show()); // This show them
        </script>
    </div>
    <div class="form form-login">
        <h2>Connexion</h2>
        <form method="post" class="forms">
            <label for="inputUsername">Nom d'Utilisateur</label>
            <input type="text" value="{{ last_username }}" name="username" id="inputUsername" class="form-control" required autofocus>
            <label for="inputPassword">Mot de passe</label>
            <input type="password" name="password" id="inputPassword" class="form-control last-input" required>
            <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
            <div class="form-actions">
                <div class="checkbox">
                    <input class="form-check-input" type="checkbox" name="_remember_me">
                    <label class="form-check-label" for="checkbox">
                        Se souvenir de moi
                    </label>
                </div>
                <a href="{{ path('user_newpassword') }}" class="white">Mot de passe oubli√© ?</a>
            </div>
            <div class="buttons">
                <button class="btn btn-form" type="submit">Connexion</button>
            </div>
        </form>
    </div>
    {% include 'footer.html.twig' %}
{% endblock %}
