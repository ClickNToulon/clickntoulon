{% extends 'base.html.twig' %}

{% block title 'Inscription - TouSolidaires' %}

{% block body %}
    <div class="toast-container position-absolute p-3">
        {% for message in app.flashes('warning') %}
            <div class="toast toast-warning d-flex align-items-center bg-dark border-0" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-body d-flex align-items-center">
                    <div class="toast-icon">
                        <i class="bi-exclamation-circle" aria-hidden="true"></i>
                    </div>
                    <div class="toast-text mx-2">
                        <p class="d-flex align-items-center text-center mb-0" style="font-size: 15px">{{ message }}</p>
                    </div>
                    <div class="alert__progress warning"></div>
                </div>
            </div>
            <script>
                const toastsWarning = [].slice.call(document.querySelectorAll('.toast-warning'));
                const toastsWarningItem = toastsWarning.map(function (toast) {
                    // Creates an array of toasts (it only initializes them)
                    return new bootstrap.Toast(toast, {"delay": 5010}) // No need for options; use the default options
                });
                toastsWarningItem.forEach(toast => toast.show()); // This show them
            </script>
        {% endfor %}
    </div>
    <div class="main-container form">
        <h2>S'inscrire à la plateforme</h2>
        {{ form_start(form, {attr: {class: 'forms'}}) }}
            {{ form_row(form.username) }}
            {{ form_row(form.email) }}
            {{ form_row(form.password.first) }}
            {{ form_row(form.password.second, {attr: {class: 'last-input'}}) }}
            <div class="form-actions">
                <div class="checkbox">
                    <input class="form-check-input" type="checkbox" id="checkbox" name="cgu" required="">
                    <label class="form-check-label label-inscription" for="checkbox">
                        J'accepte les <a href="/conditions" class="link-underline white">Conditions Générales d'Utilisation</a> de la plateforme
                    </label>
                </div>
            </div>
            <div class="buttons">
                <button class="btn btn-form" type="submit">S'inscrire</button>
            </div>
            <div class="info-usage">
                Vos données personnelles (email, nom et prénom) ne sont utilisées qu'à des fins d'authentification et sont partagées uniquement avec les commerçants lorsque vous effectuez une commande chez eux.
                (<a href="/confidentialite" class="link-underline info-usage-link">En savoir plus</a>)
            </div>
        {{ form_end(form) }}
    </div>
    {% include 'footer.html.twig' %}
{% endblock %}