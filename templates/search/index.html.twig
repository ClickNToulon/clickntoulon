{% extends 'base.html.twig' %}

{% block title 'Recherche - ClickNToulon' %}

{% block body %}
    {% include 'navbar.html.twig' with {'active': 'search'} %}
    <section class="text-gray-600 body-font" id="discover">
        <div class="sm:container px-8 sm:px-5 pt-12 mx-auto">
            <div class="flex items-center justify-center mb-4">
                <h1 class="sm:text-5xl text-3xl font-extrabold title-font text-black dark:text-white mb-4 uppercase tracking-wider title-underline">Rechercher</h1>
            </div>
            <div class="flex items-center justify-center">
                {{ form_start(search, {attr: {class: 'space-y-2 w-1/3 flex items-center justify-center flex-col'}}) }}
                <div class="relative w-full">
                    {{ form_row(search.q) }}
                </div>
                <button type="submit" class="w-1/2 py-2 px-4 text-lg font-bold rounded-full text-white bg-blue-600 hover:bg-blue-500">
                    Rechercher
                </button>
                {{ form_end(search) }}
            </div>
        </div>
    </section>

    {% if word_searched | length > 0 %}
        {% if search_count != 0 %}
            <section class="text-gray-600 body-font" id="discover">
                <div class="sm:container px-8 sm:px-5 pt-12 pb-24 mx-auto">
                    <div class="flex items-center justify-center w-full flex-col mb-4">
                        <h1 class="sm:text-3xl text-xl font-bold text-black dark:text-white mb-4 uppercase tracking-wider title-underline">{{ search_count }} {% if search_count > 1 %} Résultats {% else %} Résultat {% endif %}</h1>
                        <p class="tablet:text-2xl sm:text-xl mb-8 font-semibold text-black dark:text-gray-200">{{ search_product_count }} {% if search_product_count > 1 %} Résultats correspondent{% else %} Résultat correspond{% endif %} à des produits</p>
                    </div>
                    <div class="mt-6 grid grid-cols-1 gap-y-10 gap-x-6 sm:grid-cols-2 lg:grid-cols-4 xl:gap-x-8">
                        {% include 'product/product_skeleton.html.twig' with {'products': search_product_results} %}
                    </div>
                </div>
            </section>
            <section class="text-gray-600 body-font" id="discover">
                <div class="sm:container px-8 sm:px-5 pb-24 mx-auto">
                    <div class="text-center mb-12">
                        <p class="tablet:text-2xl text-xl mb-8 font-semibold text-black dark:text-gray-200">{{ search_shop_count }} {% if search_shop_count > 1 %} Résultats correspondent{% else %} Résultat correspond{% endif %} à des boutiques</p>
                    </div>
                    <div class="mt-6 grid grid-cols-1 gap-y-12 gap-x-6 sm:grid-cols-2 xl:gap-x-10">
                        {% include 'shop/shop_skeleton.html.twig' with {'shops': search_shop_results} %}
                    </div>
                </div>
            </section>
        {% else %}
            <div class="flex items-center flex-col text-black dark:text-white font-medium text-2xl py-24">
                <h4>Il n’y a aucun résultat pour <b class="text-blue-500">{{ word_searched }}</b></h4>
                <h6>Vérifiez l’orthographe des mots saisis ou complétez-les par un nouveau mot clé</h6>
            </div>
        {% endif %}
    {% endif %}
{% endblock %}