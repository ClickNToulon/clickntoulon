{% extends 'base.html.twig' %}

{% block title %}
{{ shop.name }} - TouSolidaires
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('js/icons.js') }}"></script>
{% endblock %}

{% block body %}
    {% include 'navbar.html.twig' with {'active': 'shop'} %}
    <div class="bg-white m-2 rounded-2xl dark:bg-gray-700">
        <div class="pt-6">
            <nav aria-label="Breadcrumb">
                <ol role="list" class="max-w-2xl mx-auto px-4 flex items-center space-x-2 sm:px-6 lg:max-w-7xl lg:px-8">
                    <li>
                        <div class="flex items-center">
                            <a href="{{ path('shop_show', {'slug': shop.slug}) }}" class="mr-2 text-sm font-medium text-black dark:text-white hover:text-yellow-500">
                                {{ shop.name }}
                            </a>
                            <svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="w-4 h-5 text-gray-300">
                                <path d="M5.697 4.34L8.98 16.532h1.327L7.025 4.341H5.697z" />
                            </svg>
                        </div>
                    </li>
                    <li>
                        <div class="flex items-center">
                            <a href="{{ path('product_index') }}" class="text-sm font-medium text-black dark:text-white hover:text-yellow-500">
                                Les produits
                            </a>
                        </div>
                    </li>
                </ol>
            </nav>
            <!-- Image gallery -->
            <div class="mt-6 max-w-2xl max-h-2xl mx-auto sm:px-6 lg:max-w-7xl lg:max-h-7xl lg:px-8 lg:grid lg:grid-cols-1 lg:gap-x-8">
                <div class="aspect-w-4 aspect-h-3 rounded-lg sm:overflow-hidden lg:aspect-w-3 lg:aspect-h-1">
                    <img src="{{ asset('uploads/shops/' ~ shop.cover) }}" alt="Model wearing plain white basic tee." class="w-full h-full object-center object-cover rounded-lg">
                </div>
            </div>
            <!-- Product info -->
            <div class="max-w-2xl mx-auto pt-10 pb-10 px-4 sm:px-6 lg:max-w-7xl lg:pt-16 lg:pb-16 lg:px-8 lg:grid lg:grid-cols-3 lg:grid-rows-[auto,auto,1fr] lg:gap-x-0">
                <div class="lg:col-span-2 lg:border-r lg:border-gray-300 lg:pr-2">
                    <h1 class="text-2xl font-extrabold tracking-tight text-black dark:text-white sm:text-3xl">
                        {{ shop.name }}
                    </h1>
                </div>
                <!-- Options -->
                <div class="mt-4 lg:mt-0 lg:row-span-3 lg:pl-2">
                    <h2 class="sr-only">Horaires de la boutique</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-2 gap-y-2.5 sm:gap-y-5 md:gap-y-10">
                        <div class="text-black dark:text-white">
                            <h3 class="font-medium">Lundi</h3>
                            <p>
                                Matin : {% if timetable.monamop == null and timetable.monamcl == null %} Fermé {% else %}{{ timetable.monamop | format_time('short',pattern="HH'h'mm", locale='fr') }} - {{ timetable.monamcl | format_time('short',pattern="HH'h'mm", locale='fr') }}{% endif %}
                            </p>
                            <p>
                                Après-midi : {% if timetable.monpmop == null and timetable.monpmcl == null %} Fermé {% else %}{{ timetable.monpmop | format_time('short',pattern="HH'h'mm", locale='fr') }} - {{ timetable.monpmcl | format_time('short',pattern="HH'h'mm", locale='fr') }}{% endif %}
                            </p>
                        </div>
                        <div class="text-black dark:text-white">
                            <h3 class="font-medium">Mardi</h3>
                            <p>
                                Matin : {% if timetable.tueamop == null and timetable.tueamcl == null %} Fermé {% else %}{{ timetable.tueamop | format_time('short',pattern="HH'h'mm", locale='fr') }} - {{ timetable.tueamcl | format_time('short',pattern="HH'h'mm", locale='fr') }}{% endif %}
                            </p>
                            <p>
                                Après-midi : {% if timetable.tuepmop == null and timetable.tuepmcl == null %} Fermé {% else %}{{ timetable.tuepmop | format_time('short',pattern="HH'h'mm", locale='fr') }} - {{ timetable.tuepmcl | format_time('short',pattern="HH'h'mm", locale='fr') }}{% endif %}
                            </p>
                        </div>
                        <div class="text-black dark:text-white">
                            <h3 class="font-medium">Mercredi</h3>
                            <p>
                                Matin : {% if timetable.wedamop == null and timetable.wedamcl == null %} Fermé {% else %}{{ timetable.wedamop | format_time('short',pattern="HH'h'mm", locale='fr') }} - {{ timetable.wedamcl | format_time('short',pattern="HH'h'mm", locale='fr') }}{% endif %}
                            </p>
                            <p>
                                Après-midi : {% if timetable.wedpmop == null and timetable.wedpmcl == null %} Fermé {% else %}{{ timetable.wedpmop | format_time('short',pattern="HH'h'mm", locale='fr') }} - {{ timetable.wedpmcl | format_time('short',pattern="HH'h'mm", locale='fr') }}{% endif %}
                            </p>
                        </div>
                        <div class="text-black dark:text-white">
                            <h3 class="font-medium">Jeudi</h3>
                            <p>
                                Matin : {% if timetable.thuamop == null and timetable.thuamcl == null %} Fermé {% else %}{{ timetable.thuamop | format_time('short',pattern="HH'h'mm", locale='fr') }} - {{ timetable.thuamcl | format_time('short',pattern="HH'h'mm", locale='fr') }}{% endif %}
                            </p>
                            <p>
                                Après-midi : {% if timetable.thupmop == null and timetable.thupmcl == null %} Fermé {% else %}{{ timetable.thupmop | format_time('short',pattern="HH'h'mm", locale='fr') }} - {{ timetable.thupmcl | format_time('short',pattern="HH'h'mm", locale='fr') }}{% endif %}
                            </p>
                        </div>
                        <div class="text-black dark:text-white">
                            <h3 class="font-medium">Vendredi</h3>
                            <p>
                                Matin : {% if timetable.friamop == null and timetable.friamcl == null %} Fermé {% else %}{{ timetable.friamop | format_time('short',pattern="HH'h'mm", locale='fr') }} - {{ timetable.friamcl | format_time('short',pattern="HH'h'mm", locale='fr') }}{% endif %}
                            </p>
                            <p>
                                Après-midi : {% if timetable.fripmop == null and timetable.fripmcl == null %} Fermé {% else %}{{ timetable.fripmop | format_time('short',pattern="HH'h'mm", locale='fr') }} - {{ timetable.fripmcl | format_time('short',pattern="HH'h'mm", locale='fr') }}{% endif %}
                            </p>
                        </div>
                        <div class="text-black dark:text-white">
                            <h3 class="font-medium">Samedi</h3>
                            <p>
                                Matin : {% if timetable.satamop == null and timetable.satamcl == null %} Fermé {% else %}{{ timetable.satamop | format_time('short',pattern="HH'h'mm", locale='fr') }} - {{ timetable.satamcl | format_time('short',pattern="HH'h'mm", locale='fr') }}{% endif %}
                            </p>
                            <p>
                                Après-midi : {% if timetable.satpmop == null and timetable.satpmcl == null %} Fermé {% else %}{{ timetable.satpmop | format_time('short',pattern="HH'h'mm", locale='fr') }} - {{ timetable.satpmcl | format_time('short',pattern="HH'h'mm", locale='fr') }}{% endif %}
                            </p>
                        </div>
                        <div class="text-black dark:text-white">
                            <h3 class="font-medium">Dimanche</h3>
                            <p>
                                Matin : {% if timetable.sunamop == null and timetable.sunamcl == null %} Fermé {% else %}{{ timetable.sunamop | format_time('short',pattern="HH'h'mm", locale='fr') }} - {{ timetable.sunamcl | format_time('short',pattern="HH'h'mm", locale='fr') }}{% endif %}
                            </p>
                            <p>
                                Après-midi : {% if timetable.sunpmop == null and timetable.sunpmcl == null %} Fermé {% else %}{{ timetable.sunpmop | format_time('short',pattern="HH'h'mm", locale='fr') }} - {{ timetable.sunpmcl | format_time('short',pattern="HH'h'mm", locale='fr') }}{% endif %}
                            </p>
                        </div>
                    </div>
                </div>

                <div class="py-10 lg:pt-6 lg:pb-6 lg:col-start-1 lg:col-span-2 lg:border-r lg:border-gray-300 lg:pr-2">
                    <!-- Description and details -->
                    <div>
                        <h3 class="block sm:hidden text-2xl font-medium text-black dark:text-white mb-4 sm:mb-0">Description</h3>
                        <div class="space-y-6">
                            <p class="text-base text-gray-600 dark:text-gray-200">{{ shop.description }}</p>
                        </div>
                        <div class="mt-10">
                            <h3 class="text-2xl font-medium text-black dark:text-white">Contact</h3>
                            <div class="mt-4">
                                <ul role="list" class="pl-2 list-none space-y-2 flex flex-col">
                                    <li class="text-black dark:text-white inline-flex items-center hover:text-yellow-500">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                                        </svg>
                                        <span class="text-black dark:text-white ml-1 hover:text-yellow-500">{{ shop.address }} {{ shop.postalcode }} {{ shop.city }}</span>
                                    </li>
                                    <li class="text-black dark:text-white inline-flex items-center hover:text-yellow-500">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                                        </svg>
                                        {% set splitArray = shop.phone|split('', 1) %}
                                        {% set first = splitArray|first %}
                                        {% set firstArray =  [0, first] | join('') %}
                                        {% set splitArray = splitArray|slice(1) %}
                                        {% set splitArray = splitArray|join('') %}
                                        {% set lastArray = [firstArray, splitArray] |join('') %}
                                        {% set finalSplit = lastArray|split('', 2) %}
                                        {% set formattedString = finalSplit|join(' ') %}
                                        <span class="text-black dark:text-white hover:text-yellow-500 ml-1"><a href="tel:{{ shop.phone }}">{{ formattedString }}</a></span>
                                    </li>
                                    {% if shop.email != null %}
                                    <li class="text-black dark:text-white inline-flex items-center hover:text-yellow-500">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207" />
                                        </svg>
                                        <span class="text-black dark:text-white ml-1 hover:text-yellow-500"><a href="mailto:{{ shop.email }}">{{ shop.email }}</a></span>
                                    </li>
                                    {% endif %}
                                </ul>
                            </div>
                        </div>
                        <div class="mt-10">
                            <h3 class="text-2xl font-medium text-black dark:text-white">Moyens de payments</h3>
                            <div class="mt-4 grid grid-cols-5 sm:grid-cols-9 gap-x-0 max-w-sm">
                                {% for payment in payments %}
                                    <p class="fs-sm mb-0">
                                        <a class="payments" title="{{ payment[1] }}"><i class="{{ payment[0] }} text-black dark:text-white"></i></a>
                                    </p>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% include 'footer.html.twig' %}
{% endblock %}

