{% extends 'base.html.twig' %}

{% block title 'ClickNToulon - Made in Toulon for Toulon' %}

{% block body %}
    {% include 'navbar.html.twig' with {'active': 'home'} %}
    {% if user is defined and user == null %}
        <div class="relative">
            <div class="max-w-7xl mx-auto">
                <div class="relative z-10 pb-8 sm:pb-16 md:pb-20 lg:max-w-2xl lg:w-full lg:pb-28 xl:pb-32">
                    <main class="mt-10 mx-auto max-w-7xl px-4 sm:mt-12 sm:px-6 md:mt-16 lg:mt-20 lg:px-8 xl:mt-28">
                        <div class="sm:text-center lg:text-left">
                            <svg viewBox="0 0 52 24" fill="currentColor" class="absolute top-0 left-0 -z-10 hidden w-32 -mt-8 -ml-16 text-blue-700 dark:text-blue-900 lg:w-32 lg:-ml-20 lg:-mt-10 lg:block">
                                <defs>
                                    <pattern id="e77df901-b9d7-4b9b-822e-16b2d410795b" x="0" y="0" width=".135" height=".30">
                                        <circle cx="1" cy="1" r=".7"></circle>
                                    </pattern>
                                </defs>
                                <rect fill="url(#e77df901-b9d7-4b9b-822e-16b2d410795b)" width="52" height="24"></rect>
                            </svg>
                            <h1 class="text-4xl font-bold text-darkblue-400 dark:text-blue-100 sm:text-5xl md:text-6xl">
                                <span class="block xl:inline">Bienvenue sur</span>
                                <span class="block text-darkblue-600 dark:text-blue-500 xl:inline">ClickNToulon</span>
                            </h1>
                            <p class="mt-3 text-base font-semibold text-blue-600 dark:text-blue-100 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0">
                                Une plateforme de Click&Collect sur Toulon, réalisé par des étudiants de l'ISEN Méditerranée, à Toulon, pour Toulon.
                            </p>
                            <div class="mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start">
                                <div>
                                    <a href="{{ path('app_signup') }}">
                                        <button class="w-full flex items-center justify-center px-6 py-3 font-bold rounded-full text-white bg-blue-700 border-2 border-transparent hover:bg-blue-600 md:py-2.5 md:text-lg md:px-6">
                                            Créez votre compte
                                            <span class="p-0.5 bg-blue-900 ml-2.5 rounded-full">
                                                <svg class="w-6 h-6" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                    <path d="M5 12h14"></path>
                                                    <path d="M12 5l7 7-7 7"></path>
                                                </svg>
                                            </span>
                                        </button>
                                    </a>
                                </div>
                                <div class="mt-3 sm:mt-0 sm:ml-6">
                                    <a href="{{ path('about_index') }}">
                                        <button class="w-full flex items-center justify-center px-6 py-3 font-bold rounded-full text-blue-900 hover:text-white dark:text-white border-2 border-blue-800 hover:bg-blue-900 hover:border-blue-900 md:py-2.5 md:text-lg md:px-6">
                                            Qui sommes-nous ?
                                        </button>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            </div>
            <div class="lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2 py-12">
                <img class="h-56 w-full object-contain sm:h-72 md:h-96 lg:w-full lg:h-full" src="{{ asset('images/home.svg') }}" alt="">
            </div>
        </div>
    {% else %}
        <div class="relative">
            <div class="max-w-7xl mx-auto">
                <div class="relative z-10 pb-8 sm:pb-16 md:pb-20 lg:max-w-2xl lg:w-full lg:pb-28 xl:pb-32">
                    <main class="mt-10 mx-auto max-w-7xl px-4 sm:mt-12 sm:px-6 md:mt-16 lg:mt-20 lg:px-8 xl:mt-28">
                        <div class="sm:text-center lg:text-left">
                            <svg viewBox="0 0 52 24" fill="currentColor" class="absolute top-0 left-0 -z-10 hidden w-32 -mt-8 -ml-16 text-blue-700 dark:text-blue-900 lg:w-32 lg:-ml-20 lg:-mt-10 lg:block">
                                <defs>
                                    <pattern id="e77df901-b9d7-4b9b-822e-16b2d410795b" x="0" y="0" width=".135" height=".30">
                                        <circle cx="1" cy="1" r=".7"></circle>
                                    </pattern>
                                </defs>
                                <rect fill="url(#e77df901-b9d7-4b9b-822e-16b2d410795b)" width="52" height="24"></rect>
                            </svg>
                            <h1 class="text-4xl font-bold text-darkblue-400 dark:text-blue-100 sm:text-5xl md:text-6xl">
                                <span class="block xl:inline">Bonjour,</span>
                                <br class="hidden xl:block">
                                <span class="block text-darkblue-600 dark:text-blue-500 xl:inline">{{ user.surname }} {{ user.name }}</span>
                            </h1>
                            <p class="mt-3 font-semibold text-base text-blue-600 dark:text-blue-100 sm:mt-5 sm:text-lg sm:max-w-2xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0 break-normal">
                                Que cherchez-vous de beau sur ClickNToulon aujourd'hui ? <br> Une envie particulière ou une envie de regarder les nouveautés ?
                            </p>
                            <div class="mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start">
                                <div>
                                    <a href="{{ path('user_orders') }}">
                                        <button class="w-full flex items-center justify-center px-6 py-3 text-base font-bold rounded-full text-white border-2 border-transparent bg-blue-600 hover:bg-blue-500 md:py-2.5 md:text-lg md:px-6">
                                            Mes commandes
                                            <span class="p-0.5 bg-blue-900 ml-2.5 rounded-full">
                                                <svg class="w-6 h-6" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                    <path d="M5 12h14"></path>
                                                    <path d="M12 5l7 7-7 7"></path>
                                                </svg>
                                            </span>
                                        </button>
                                    </a>
                                </div>
                                <div class="mt-3 sm:mt-0 sm:ml-6">
                                    <a href="{{ path('basket_index') }}">
                                        <button class="w-full flex items-center justify-center px-6 py-3 text-base font-bold rounded-full text-blue-900 hover:text-white dark:text-white border-2 border-blue-800 hover:bg-blue-800 md:py-2.5 md:text-lg md:px-6">
                                            Mon panier
                                        </button>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            </div>
            <div class="lg:absolute z-10 lg:inset-y-0 lg:right-0 lg:w-1/2">
                <img class="h-56 w-full object-contain sm:h-80 md:h-96 lg:w-full lg:h-full" src="{{ asset('images/home.svg') }}" alt="">
            </div>
        </div>
    {% endif %}


    <section>
        <div class="container mx-auto pt-16 px-4 sm:pt-24 sm:px-6 lg:px-8">
            <div class="flex items-start justify-center md:justify-between border-b-2 border-blue-800 dark:border-gray-700 pb-2">
                <h2 class="text-2xl font-extrabold tracking-tight text-blue-800 dark:text-gray-200">Les boutiques partenaires</h2>
                <a href="{{ path('product_index') }}">
                    <button class="text-blue-800 dark:text-blue-500 text-xl font-bold hidden sm:inline-flex items-center rounded-full px-3 py-1 hover:bg-blue-800 hover:text-white">
                        <span class="mr-1">Toutes les boutiques</span>
                        <svg class="w-6 h-6" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M5 12h14"></path>
                            <path d="M12 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </a>
            </div>
        </div>
        <div class="mx-auto pb-16">
            <div class="my-6 relative w-full flex gap-6 snap-x snap-mandatory overflow-x-auto pb-8 shop-scrollbar mx-auto container">
                {% if shops is defined and shops != [] %}
                    {% for shop in shops %}
                    <a href="{{ path('shop_show', {slug: shop.slug}) }}"
                       class="snap-center snap-always shrink-0 bg-darkblue-150 dark:bg-darkblue-800 group-hover:bg-opacity-75 rounded-lg">
                        <img class="object-cover object-center w-96 h-40 bg-gray-200 rounded-t-lg" src="{{ asset('uploads/shops/' ~ shop.image) }}" alt="">
                        <div class="p-4">
                            <div class="flex items-center justify-between">
                                <h2 class="text-black dark:text-white text-xl font-bold">{{ shop.name }}</h2>
                                <p class="text-gray-700 dark:text-gray-400 font-medium inline-flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                                    </svg>
                                    {{ shop.city }}
                                </p>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                {% else %}
                    <div class="w-full flex items-center justify-center flex-col space-y-4 mt-10">
                        <h1 class="text-center text-black dark:text-white font-bold text-4xl">
                            Aucune boutique sur ClickNToulon actuellement...
                        </h1>
                        <p class="text-center text-black dark:text-white font-bold text-2xl">
                            Vous pouvez créer la vôtre dès maintenant.
                        </p>
                        <p class="text-center text-black dark:text-white font-bold text-2xl">
                            Pour cela, rendez-vous sur votre profil.
                        </p>
                    </div>
                {% endif %}
            </div>
        </div>
    </section>

    <section>
        <div class="container mx-auto pt-8 px-4 sm:pt-16 sm:px-6 lg:px-8">
            <div class="flex items-start justify-center md:justify-between border-b-2 border-blue-800 dark:border-gray-700 pb-2">
                <h2 class="text-2xl font-extrabold tracking-tight text-blue-800 dark:text-gray-200">Les derniers produits</h2>
                <a href="{{ path('product_index') }}">
                    <button class="text-blue-800 dark:text-blue-500 text-xl font-bold hidden sm:inline-flex items-center rounded-full px-3 py-1 hover:bg-blue-800 hover:text-white">
                        <span class="mr-1">Tous les produits</span>
                        <svg class="w-6 h-6" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M5 12h14"></path>
                            <path d="M12 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </a>
            </div>
            <div class="mt-6 grid grid-cols-1 gap-y-10 gap-x-6 sm:grid-cols-2 lg:grid-cols-4 xl:gap-x-8">
                {% if products is defined and products != [] %}
                    {% include 'product/product_skeleton.html.twig' with {'products': products} %}
                {% else %}
                    <h1 class="text-center col-span-1 sm:col-span-2 lg:col-span-4 w-full flex items-center justify-center text-black dark:text-white font-bold text-4xl mt-10 mb-16">
                        Aucun produit disponible actuellement...
                    </h1>
                {% endif %}
            </div>
        </div>
    </section>

    {% include('footer.html.twig') %}
{% endblock %}